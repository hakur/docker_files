#!/bin/bash

function copy_and_rename_package_json_files {
  # Define the source and destination directories
  src_dir="$1"
  dest_dir="$2"

  # Loop over all package.json files in the source directory
  for file in "$src_dir"/**/package.json
  do
    # Extract the package name from the file path
    package_name=$(basename $(dirname $file))
    mkdir -p "$dest_dir/${package_name}"
    # Copy the file to the destination directory with a new name
    cp "$file" "$dest_dir/${package_name}/package.json"
  done
  # Loop over all package.json files in the source directory
  for file in "$src_dir"/**/package-lock.json
  do
    # Extract the package name from the file path
    package_name=$(basename $(dirname $file))
    # Copy the file to the destination directory with a new name
    cp "$file" "$dest_dir/${package_name}/package-lock.json"
  done
}

# Test the function by calling it with sample directory paths
# copy_and_rename_package_json_files "/path/to/source/directory" "/path/to/destination/directory"
